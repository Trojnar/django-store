{% extends '_base.html' %}

{% block title %} {{product.name}} {% endblock title %}

{% block content %}
    {% if product.image %}
      <br><img height=300 src="{{ product.image.url}}" alt="{{ product.title }}">
    {% endif %}
      <form method="post">
        {% csrf_token %}
        <br> {{ product.name }}
        {% if edit == 'name' %}
            <input type="submit" value="change">
            <input type="button" onclick="location.href='{% url 'product_details' pk=product.pk %}';" value="cancel" />
        {% else %}
            <a href={% url 'product_edit' pk=product.pk edit='name' %}>edit</a>
        {% endif %}

        <br> {{ product.producer }}
        {% if edit == 'producer' %}
            <input type="submit" value="change">
            <a href={% url 'product_details' pk=product.pk %}></a>
            <input type="button" onclick="location.href='{% url 'product_details' pk=product.pk %}';" value="cancel" />
        {% else %}
            <a href={% url 'product_edit' pk=product.pk edit='producer' %}>edit</a>
        {% endif %}

        <br> {{ product.price }}
        {% if edit == 'price' %}
            <input type="submit" value="change">
            <input type="button" onclick="location.href='{% url 'product_details' pk=product.pk %}';" value="cancel" />
        {% else %}
            <a href={% url 'product_edit' pk=product.pk edit='price' %}>edit</a>
        {% endif %}
      </form>

      <br>

    {% if user.is_authenticated %}
      <a href="{% url 'review_create' product.pk %}" type='submit'>Review:</a>
      <form action="" method="post">
        {% csrf_token %}
        <input id="review" type="text" name="review" value="{{ new_review }}">
        <input type="submit" value="OK">
      </form> 
    {% else %} 
      Only logged in users can add reviews. <a href={% url 'account_login' %}>Log In</a> 
      or <a href={% url 'account_signup' %}> Sign Up </a>.
    {% endif %}      
    
    <ul>
    {% for review in reviews.all %}
        <li>
            {{ review.review }} 
            ~{{review.author}}
        </li>
    {% endfor %}
    </ul>
{% endblock content %}