{% extends '_base.html' %}

{% load poll_extras %}

{% block title %} List Of Products {% endblock title %}

{% block content %}
    <ul>
    {% for product in object_list%}
      <form method="post">
        {% csrf_token %}
        <li><a href="{{ product.get_absolute_url }}">{{ product.name }} - {{ product.price|decimal_separator }} $ - {{ product.producer }}</a>
            <input hidden name="product_pk" value={{ product.pk }}>
            {% if product.count > 0 %}
              <br>In stock. {{product.count}} left.
              {% if user.is_authenticated %}
                <br><input type='submit' name="cart_add_button" value="Add to cart">
              {% endif %}
            {% else %}
              <br>Not in stock.
            {% endif %}</li>
      </form>
    {% empty %}
        <li> No products avalivible. </li>
    {% endfor %}
    </ul>

{% endblock content %}